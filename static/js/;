var canvas = document.getElementById('spinner');
var context = canvas.getContext('2d');
var centerX, centerY;
var i = 0;

canvas.addEventListener("click", function() {
    window.location = "index.html";
});
drawClock();
setInterval(drawClock, 1000);

//Draws the clock onto the canvas
function drawClock() {
    if (canvas != null) {
        if (context != null) {

            //Clear the screen
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.strokeStyle = "black";

            //Find the center points
            centerX = canvas.width / 2;
            centerY = canvas.height / 2;
            var radius = (canvas.width / 2) - 2;

            //Draw the outer circle
            context.beginPath();
            context.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            context.stroke();

            //Draw the inner circle
            context.beginPath();
            context.arc(centerX, centerY, 2, 0, 2 * Math.PI);
            context.fill();

            //Draw the number segements
            var numOfSegments = 12;
            var segmentLinePercentage = 1;
            for (var i = 0; i < numOfSegments; i++) {
                context.beginPath();
                // Inner point of the line
                context.moveTo(
                    centerX + Math.sin(((Math.PI * 2) / numOfSegments) * i) * (radius * (1 - segmentLinePercentage)),
                    centerY - Math.cos(((Math.PI * 2) / numOfSegments) * i) * (radius * (1 - segmentLinePercentage)));
                // Outer point of the line
                context.lineTo(
                    centerX + Math.sin(((Math.PI * 2) / numOfSegments) * i) * radius,
                    centerY - Math.cos(((Math.PI * 2) / numOfSegments) * i) * radius);
                context.stroke();
            }

            //Write the text
            var rotation = i*(Math.PI/numOfSegments);
            i++;
            context.save()
            context.translate(100, 100);
            context.rotate(rotation);
            context.font = canvas.height / 10 + "px sans-serif";
            context.textAlign = "center";
            context.fillStyle = "grey";
            context.fillText("OMEGA", 0, 0);
            context.restore();

            context.strokeStyle = "black";
            context.stroke();
        }
    }
}

